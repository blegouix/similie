<!--
SPDX-FileCopyrightText: 2024 Baptiste Legouix
SPDX-License-Identifier: MIT
-->
<!-- HTML header for doxygen 1.9.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SimiLie: Running SimiLie</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
    DoxygenAwesomeFragmentCopyButton.init()
    DoxygenAwesomeInteractiveToc.init()
    DoxygenAwesomeParagraphLink.init()
</script>
</head>
<body>
<a href="https://github.com/blegouix/similie" class="github-corner" title="View source on GitHub" target="_blank" rel="noopener noreferrer">
  <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
  <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="index.html"><img alt="Logo" src="logo.png"/></a></td>
  <td id="projectalign">
   <div id="projectname">SimiLie
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('Running.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Running SimiLie</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_Running"></a></p>
<h1><a class="anchor" id="autotoc_md3"></a>
Dependencies</h1>
<p>SimiLie relies on <code>git submodule</code> to manage its dependencies and on <code>cmake</code> as a build system. It is a lightweight header-only library. It can thus be included as a dependency of your project with the <code>cmake</code> command-line:</p>
<div class="fragment"><div class="line">add_subdirectory(vendor/similie)</div>
</div><!-- fragment --><p>By including the header file <code><a class="el" href="similie_8hpp_source.html">similie.hpp</a></code> in your code, you get access to:</p>
<ul>
<li><a href="https://github.com/kokkos/kokkos">Kokkos</a> in the <code>Kokkos::</code> namespace, a performance-portable (CPU &amp; GPU) C++ library targeting all major HPC platforms.</li>
<li><a href="https://github.com/CExA-project/ddc">DDC</a> in the <code>ddc::</code> namespace, an abstraction layer build upon Kokkos to provide labeling of dimensions of arrays and convenient API to describe discrete scalar fields (+ computation kernels for FFT and splines).</li>
<li><a href="https://github.com/blegouix/similie">SimiLie</a> itself in the <code>sil::</code> namespace.</li>
</ul>
<p>Moreover, parts of SimiLie [<em>are planned to</em>] relie on the FFT and splines kernels provided by DDC. The first is build upon <a href="https://github.com/kokkos/kokkos-fft">kokkos-fft</a> and the second upon <a href="https://github.com/kokkos/kokkos-kernels">kokkos-kernels</a> or <a href="https://github.com/ginkgo-project/ginkgo">Ginkgo</a>, depending on the linear algebra backend you want to use. Unfortunalty, at this moment DDC does not support linking only one of those two backends, thus you need a complete install of Ginkgo 1.8 to run SimiLie even if you do not plan to use it (this dependency is not provided as a <code>git submodule</code>, due to its weight). DDC FFT and splines kernels also require <a href="https://www.fftw.org/">FFTW</a> and <a href="https://www.netlib.org/lapack/lapacke.html">LAPACKE</a>, that are nor provided as <code>git submodules</code>.</p>
<p>I/O are handled by the <a href="https://pdi.dev/1.2/Decl_HDF5_plugin.html">Decl'HDF5 plugin of PDI</a>, that is nor provided as a <code>git submodule</code>.</p>
<p>Finally, the <code>sil::young_tableau</code> module relies on the <a href="https://en.cppreference.com/w/c/preprocessor/embed">embed</a> directive from C23. As it is not yet in C++ (even in C++26), the only supported compiler for this module at the moment seems to be <a href="https://github.com/llvm/llvm-project/releases">Clang 19</a>. Thus, by default the <code>BUILD_YOUNG_TABLEAU</code> flag is turned <code>OFF</code> and this feature (which is quite independant of the rest of the SimiLie library) is not compiled, making SimiLie a C++20 library.</p>
<dl class="section attention"><dt>Attention</dt><dd>A Spack-based toolchain is provided <a href="https://github.com/blegouix/similie/tree/main/toolchains/v100.spack">here</a> to get a complete environment for Ubuntu 24 and Nvidia V100 GPU. It can be easily adapted to other OS/hardware.</dd></dl>
<h1><a class="anchor" id="autotoc_md4"></a>
Compilation</h1>
<p>First, be sure to have a full install of FFTW, LAPACKE, Ginkgo and PDI. Then clone the main branch of the <a href="https://github.com/blegouix/similie">github repo</a> and populate the other dependencies with:</p>
<div class="fragment"><div class="line">git clone --recurse-submodules git@github.com:blegouix/similie.git</div>
</div><!-- fragment --><p>Run the <code>CMake</code>command:</p>
<div class="fragment"><div class="line">cmake -DCMAKE_CXX_COMPILER=g++-13 -DCMAKE_BUILD_TYPE=Debug -DKokkos_ENABLE_OPENMP=ON -B build -S .</div>
</div><!-- fragment --><p>for CPU compilation or:</p>
<div class="fragment"><div class="line">cmake -DCMAKE_CXX_COMPILER=$PWD/vendor/ddc/vendor/kokkos/bin/nvcc_wrapper -DCMAKE_BUILD_TYPE=Debug -DKokkos_ENABLE_CUDA=ON -DKokkos_ARCH_&lt;YOUR_ARCH_NAMECODE&gt;=ON -DKokkos_ENABLE_CUDA_RELOCATABLE_DEVICE_CODE=OFF -B similie/build -S similie</div>
</div><!-- fragment --><p>for Nvidia GPU compilation. <code>&lt;YOUR_ARCH_NAMECODE&gt;</code> must be replaced with a hardware-specific namecode that you will find <a href="https://kokkos.org/kokkos-core-wiki/keywords.html#architectures">here</a>. The <code>Relocatable Device Code</code> CUDA feature is disabled to prevent irrelevent <code>nvlink</code> warnings.</p>
<dl class="section important"><dt>Important</dt><dd>Debug mode is strongly recommended during development because a lot of assertions guarantee the correct usage of library. Running in Release mode without having checked first the proper execution in Debug mode may result to silent bugs. Release mode is of course required at a later stage to get full performance.</dd></dl>
<p>You can then edit the configuration with <code>ccmake .</code>. Please refer to the documentations of Kokkos and DDC for their respective cmake compilation flags.</p>
<p>Finally compile with the <code>make</code> command (with <code>-j</code> flag for parallel compilation).</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Usage</h1>
<p>Tests chain can be run with:</p>
<div class="fragment"><div class="line">ctest</div>
</div><!-- fragment --><p>A particular test with:</p>
<div class="fragment"><div class="line">ctest -R NameOfTheTest --verbose</div>
</div><!-- fragment --><p>And examples are compiled in the <code>examples/</code> folder. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!--
SPDX-FileCopyrightText: 2024 Baptiste Legouix
SPDX-License-Identifier: MIT
-->
<!-- HTML footer for doxygen 1.9.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
</body>
</html>
